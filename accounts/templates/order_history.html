{% extends "base.html" %}
{% block content %}
<div class="container">
	<div class="row">
		<div class="text-center max-width pt-5 pb-4">
			<h3>{{ user.username }}'s order history</h3>
		</div>
	</div>
	{% if orders %}
	{% for order in orders reversed %}
	<div class="pb-5">
		<h5>Order ID #{{order.id}}</h5>
		<div class="row">
			<p>Order Date - {{ order.date }}</p>
		</div>
		<div class="row">
			<p>Address - {{ order.street_address1 }}</p>
		</div>
		<div class="row">
			<p>{{ order.street_address2 }}</p>
		</div>
		<div class="row">
			<p>{{ order.town_or_city }}</p>
		</div>
		<h5>Items</h5>
		
        {% for order_l in order_line %}
            {% if order_l.order.id == order.id %}
		    <div class="row">
			    <p>{{ order_l.quantity }} - {{ order_l.card.card_title }}</p>
		    </div>
            {% endif %}
		{% endfor %}

	</div>
	{% endfor %}
	{% else %}
	<div class="row">
		<div class="text-center max-width pt-5 pb-4">
			<h4>You have no previous orders</h4>
		</div>
	</div>
	{% endif %}
</div>

{% endblock %}