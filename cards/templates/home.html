{% extends "base.html" %}
{% load static from staticfiles %}
{% block content %}

<!--This displays any messages such as "you have been logged out" etc.-->
<div class="row">
	{% if messages %}
	<div>
		{% for message in messages %}
		<h1>{{message}}</h1>
		{% endfor %}
	</div>
	{% endif %}
</div>
<!--End messages section-->

<!-- Carousel -->
<div class="row">
	<div id="carouselIndicators" class="carousel slide col-sm-12" data-ride="carousel">
		<ol class="carousel-indicators">
			<li data-target="#carouselIndicators" data-slide-to="0" class="active"></li>
			<li data-target="#carouselIndicators" data-slide-to="1"></li>
			<li data-target="#carouselIndicators" data-slide-to="2"></li>
		</ol>
		<div class="carousel-inner">
			<div class="carousel-item active">
				<img class="d-block w-100" src="{% static 'img/ikoria_banner_img.jpg' %}" alt="First slide">
            </div>
				<div class="carousel-item">
					<img class="d-block w-100" src="{% static 'img/ikoria_banner_img1.jpg' %}" alt="Second slide">
            </div>
					<div class="carousel-item">
						<img class="d-block w-100" src="{% static 'img/ikoria_banner_img2.jpg' %}" alt="Third slide">
            </div>
					</div>
					<a class="carousel-control-prev" href="#carouselIndicators" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselIndicators" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div>
			<!--End of carousel-->
			<div class="container">
				<!--Website Header-->
				<div class="row border-bottom">
					<div class="px-3 py-3 pt-md-4 pb-md-6 mx-auto text-center">
						<h3 class="display-4">Magic Market Update</h3>
						<p class="lead">Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur aut iusto
							rerum hic accusantium velit consequatur, eos ipsum quis natus sapiente iure explicabo
							adipisci pariatur alias officia numquam. Consectetur, aspernatur?
							Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur aut iusto rerum hic
							accusantium velit consequatur, eos ipsum quis natus sapiente iure explicabo adipisci
							pariatur alias officia numquam. Consectetur, aspernatur?
							Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur aut iusto rerum hic
							accusantium velit consequatur, eos ipsum quis natus sapiente iure explicabo adipisci
							pariatur alias officia numquam. Consectetur, aspernatur?</p>
					</div>
				</div>
				<!---->
				<div class="row justify-content-around pt-3">
					<!--Popular cards sorted by views-->
					<div class="col-sm-12 col-md-12 col-lg-4">
						<h1 class="pb-3 mb-4 center">
							Popular Listings
						</h1>

						{% for card in cards|dictsortreversed:"listing_views" %}

						<!--This is a test id to try to trigger the display image function in custom.js-->
						<button class="button" onclick="imageToggleHide({{ card.id }})">Hide Image</button>
						<button class="button" onclick="imageToggleShow({{ card.id }})">Show Image</button>
                        <img src="{% static 'img/camera_icon.png' %}" alt="Camera Icon" onmouseover="imageToggleHide({{ card.id }})" onmouseout="imageToggleShow({{ card.id }})">
						<!---->

						<div class="card mb-4 shadow-sm">

							<div class="card-header">
								{{ card.card_title }}
							</div>
							<div class="card-body">
								<p>{{ card.card_description|truncatewords:30 }}</p>

								{% if card.image %}
								<img class="card-image" id="{{card.id}}" src="/media/{{ card.image }}">
                                {% endif %}

			</div>
								<p><a href="{% url 'card_detail' card.id %}" class="btn btn-custom">Read more</a></p>
							</div>
							{% endfor %}
						</div>
						<!--End of popular cards sections-->

						<!--Latest listings section-->
						<div class="col-sm-12 col-md-12 col-lg-4">
							<h1 class="pb-3 mb-4 center">
								Recent Listings
							</h1>
							{% for card in cards|dictsortreversed:"listing_created_date"%}
							<!--testing different styles-->
							<a href="{% url 'card_detail' card.id %}">
								<div class="card-minimalistic">
									<img class="card-image" src="/media/{{ card.image }}">
									<p>{{ card.card_title }}</p>
									<p>Â£{{ card.card_price }}</p>
								</div>
							</a>
							<!---->

							{% endfor %}
						</div>
						<!--End of FILLER SECTION-->
					</div>
				</div>
				{% endblock %}

				{% block end_js %}
				<script type="text/javascript" src="{% static 'js/custom.js' %}"></script>
				{% endblock %}